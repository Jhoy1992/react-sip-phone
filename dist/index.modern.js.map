{"version":3,"file":"index.modern.js","sources":["../src/actions/sipAccounts.ts","../src/actions/sipSessions.ts","../src/actions/config.ts","../src/util/hold.ts","../src/actions/device.ts","../src/util/audio.ts","../src/util/TonePlayer.ts","../src/util/ToneManager.ts","../src/util/sessions.ts","../src/util/incomingSession.ts","../src/lib/SipAccount.ts","../src/SipWrapper.tsx","../src/assets/settings-24px.svg","../src/assets/mic-24px.svg","../src/assets/volume_up-24px.svg","../src/components/Status.tsx","../src/components/phone/DialButton.tsx","../src/util/buttons.ts","../src/components/phone/Dialpad.tsx","../src/assets/phone_paused-24px.svg","../src/components/phone/Hold.tsx","../src/assets/mic_off-24px.svg","../src/components/phone/Mute.tsx","../src/assets/arrow_forward-24px.svg","../src/components/phone/BlindTransfer.tsx","../src/assets/phone_in_talk-24px.svg","../src/assets/call_end-24px.svg","../src/components/phone/AttendedTransfer.tsx","../src/assets/dialpad-24px.svg","../src/components/phone/Phone.tsx","../src/assets/call-24px.svg","../src/components/phone/Incoming.tsx","../src/components/PhoneSessions.tsx","../src/assets/call-large-40px.svg","../src/components/Dialstring.tsx","../src/reducers/sipSessions.ts","../src/reducers/sipAccounts.ts","../src/reducers/device.ts","../src/reducers/config.ts","../src/reducers/index.ts","../src/store/configureStore.ts","../src/index.tsx"],"sourcesContent":["import SIPAccount from \"../lib/SipAccount\"\n\nexport const SIPACCOUNT_UNREGISTERED = 'SIPACCOUNT_UNREGISTERED'\nexport const NEW_USERAGENT = 'NEW_USERAGENT'\nexport const NEW_ACCOUNT = 'NEW_ACCOUNT'\n\nexport const setNewAccount = (account: SIPAccount) => {\n  return { type: NEW_ACCOUNT, payload: account }\n}","import { Session, SessionState } from 'sip.js'\nimport { Dispatch } from 'redux';\n\nexport const NEW_SESSION = 'NEW_SESSION'\nexport const NEW_ATTENDED_TRANSFER = 'NEW_ATTENDED_TRANSFER'\nexport const INCOMING_CALL = 'INCOMING_CALL'\n\nexport const ACCEPT_CALL = 'ACCEPT_CALL'\nexport const DECLINE_CALL = 'DECLINE_CALL'\n\nexport const SIPSESSION_STATECHANGE = 'SIPSESSION_STATECHANGE'\nexport const CLOSE_SESSION = 'CLOSE_SESSION'\n\nexport const SIPSESSION_MAKECALL_REQUEST = 'SIPSESSION_MAKECALL_REQUEST'\nexport const SIPSESSION_MAKECALL_SUCCESS = 'SIPSESSION_MAKECALL_SUCCESS'\nexport const SIPSESSION_MAKECALL_FAIL = 'SIPSESSION_MAKECALL_FAIL'\n\nexport const SIPSESSION_HOLD_REQUEST = 'SIPSESSION_HOLD_REQUEST'\nexport const SIPSESSION_HOLD_SUCCESS = 'SIPSESSION_HOLD_SUCCESS'\nexport const SIPSESSION_HOLD_FAIL = 'SIPSESSION_HOLD_FAIL'\nexport const SIPSESSION_UNHOLD_REQUEST = 'SIPSESSION_UNHOLD_REQUEST'\nexport const SIPSESSION_UNHOLD_SUCCESS = 'SIPSESSION_UNHOLD_SUCCESS'\nexport const SIPSESSION_UNHOLD_FAIL = 'SIPSESSION_UNHOLD_FAIL'\n\nexport const SIPSESSION_MUTE_REQUEST = 'SIPSESSION_MUTE_REQUEST'\nexport const SIPSESSION_MUTE_SUCCESS = 'SIPSESSION_MUTE_SUCCESS'\nexport const SIPSESSION_MUTE_FAIL = 'SIPSESSION_MUTE_FAIL'\nexport const SIPSESSION_UNMUTE_REQUEST = 'SIPSESSION_UNMUTE_REQUEST'\nexport const SIPSESSION_UNMUTE_SUCCESS = 'SIPSESSION_UNMUTE_SUCCESS'\nexport const SIPSESSION_UNMUTE_FAIL = 'SIPSESSION_UNMUTE_FAIL'\n\nexport const SIPSESSION_BLIND_TRANSFER_REQUEST =\n  'SIPSESSION_BLIND_TRANSFER_REQUEST'\nexport const SIPSESSION_BLIND_TRANSFER_SUCCESS =\n  'SIPSESSION_BLIND_TRANSFER_SUCCESS'\nexport const SIPSESSION_BLIND_TRANSFER_FAIL = 'SIPSESSION_BLIND_TRANSFER_FAIL'\n\nexport const SIPSESSION_ATTENDED_TRANSFER_REQUEST =\n  'SIPSESSION_ATTENDED_TRANSFER_REQUEST'\nexport const SIPSESSION_ATTENDED_TRANSFER_PENDING =\n  'SIPSESSION_ATTENDED_TRANSFER_PENDING'\nexport const SIPSESSION_ATTENDED_TRANSFER_READY =\n  'SIPSESSION_ATTENDED_TRANSFER_READY'\nexport const SIPSESSION_ATTENDED_TRANSFER_CANCEL =\n  'SIPSESSION_ATTENDED_TRANSFER_CANCEL'\nexport const SIPSESSION_ATTENDED_TRANSFER_FAIL =\n  'SIPSESSION_ATTENDED_TRANSFER_FAIL'\nexport const SIPSESSION_ATTENDED_TRANSFER_SUCCESS =\n  'SIPSESSION_ATTENDED_TRANSFER_SUCCESS'\n\nexport const stateChange = (newState: SessionState, id: string) => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_STATECHANGE,\n    payload: { state: newState, id }\n  })\n}\n\nexport const closeSession = (id: string) => (dispatch: Dispatch) => {\n  dispatch({\n    type: CLOSE_SESSION,\n    payload: id\n  })\n}\n\nexport const acceptCall = (session: Session) => {\n  return { type: ACCEPT_CALL, payload: session }\n}\n\nexport const declineCall = (session: Session) => {\n  return { type: DECLINE_CALL, payload: session }\n}\n\nexport const endCall = (sessionId: string) => {\n  return { type: CLOSE_SESSION, payload: sessionId }\n}\n\nexport const holdCallRequest = (session: Session) => (dispatch: Dispatch) => {\n  if (\n    !session.sessionDescriptionHandler ||\n    session.state !== SessionState.Established\n  ) {\n    return { type: SIPSESSION_HOLD_FAIL }\n  }\n  try {\n    session.invite({\n      sessionDescriptionHandlerModifiers: [\n        session.sessionDescriptionHandler!.holdModifier\n      ]\n    })\n    dispatch({ type: SIPSESSION_HOLD_REQUEST, payload: session.id })\n  } catch (err) {\n    dispatch({ type: SIPSESSION_HOLD_FAIL })\n  }\n  return\n}\n\n//maps thru onHold and sessions arrays looking for a call to put on hold before unHolding a call \nexport const unHoldCallRequest = (session: Session, onHolds: Array<any>, sessions: Array<any>) => (dispatch: Dispatch) => {\n  //checks for  established sessions that are not on hold\n  for (let [sessionId, _session] of Object.entries(sessions)) {\n    if (\n      onHolds.indexOf(sessionId) < 0 &&\n      sessionId !== session.id && _session.state === 'Established'\n    ) {\n      // hold session if not on hold\n      try {\n        _session.invite({\n          sessionDescriptionHandlerModifiers: [\n            _session.sessionDescriptionHandler!.holdModifier\n          ]\n        })\n        dispatch({ type: SIPSESSION_HOLD_REQUEST, payload: _session.id })\n      } catch (err) {\n        dispatch({ type: SIPSESSION_HOLD_FAIL })\n      }\n    }\n  }\n  // unhold original session\n  try {\n    session.invite()\n    dispatch({ type: SIPSESSION_UNHOLD_REQUEST, payload: session.id })\n  } catch (err) {\n    dispatch({ type: SIPSESSION_UNHOLD_FAIL })\n  }\n  return;\n}\n\nexport const blindTransferRequest = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_BLIND_TRANSFER_REQUEST\n  })\n}\n\nexport const blindTransferSuccess = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_BLIND_TRANSFER_SUCCESS\n  })\n}\n\nexport const blindTransferFail = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_BLIND_TRANSFER_FAIL\n  })\n}\n\nexport const attendedTransferRequest = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_ATTENDED_TRANSFER_REQUEST,\n  })\n}\n\nexport const attendedTransferCancel = (session: Session) => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_ATTENDED_TRANSFER_CANCEL,\n    payload: session\n\n  })\n}\n\nexport const attendedTransferReady = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_ATTENDED_TRANSFER_READY\n  })\n}\n\nexport const attendedTransferPending = (session: Session) => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_ATTENDED_TRANSFER_PENDING,\n    payload: session\n  })\n}\n\nexport const attendedTransferSuccess = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_ATTENDED_TRANSFER_SUCCESS\n  })\n}\nexport const attendedTransferFail = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_ATTENDED_TRANSFER_FAIL,\n  })\n}\n\nexport const muteRequest = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_MUTE_REQUEST\n  })\n}\n\nexport const muteSuccess = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_MUTE_SUCCESS\n  })\n}\n\nexport const muteFail = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_MUTE_FAIL\n  })\n}\n\nexport const unMuteRequest = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_UNMUTE_REQUEST\n  })\n}\n\nexport const unMuteSuccess = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_UNMUTE_SUCCESS\n  })\n}\n\nexport const unMuteFail = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_UNMUTE_FAIL\n  })\n}\n\n","import { PhoneConfig, AppConfig } from '../models'\n\nexport const SET_CREDENTIALS = 'SET_CREDENTIALS'\nexport const SET_PHONE_CONFIG = 'SET_PHONE_CONFIG'\nexport const SET_APP_CONFIG = 'SET_APP_CONFIG'\nexport const STRICT_MODE_SHOW_CALL_BUTTON = 'STRICT_MODE_SHOW_CALL_BUTTON'\nexport const STRICT_MODE_HIDE_CALL_BUTTON = 'STRICT_MODE_HIDE_CALL_BUTTON'\nexport const ATTENDED_TRANSFER_LIMIT_REACHED = 'ATTENDED_TRANSFER_LIMIT_REACHED'\nexport const SESSIONS_LIMIT_REACHED = 'SESSIONS_LIMIT_REACHED'\n\nexport const setCredentials = (uri: string = '', password: string = '') => {\n  return { type: SET_CREDENTIALS, payload: {uri, password} }\n}\n\nexport const setPhoneConfig = (config: PhoneConfig) => {\n  return { type: SET_PHONE_CONFIG, payload: config}\n}\n\nexport const setAppConfig = (config: AppConfig) => {\n  return { type: SET_APP_CONFIG, payload: config}\n}\n\nexport const setAppConfigStarted = () => {\n  return {type: STRICT_MODE_SHOW_CALL_BUTTON}\n}\n\nexport const setAppConfigCallEnded = () =>{\n  return {type: STRICT_MODE_HIDE_CALL_BUTTON}\n}\n\nexport const attendedTransferLimitReached = () => {\n  return {type: ATTENDED_TRANSFER_LIMIT_REACHED}\n}\n\nexport const sessionsLimitReached = () => {\n  return {type: SESSIONS_LIMIT_REACHED}\n}","import { phoneStore } from '../index'\nimport {\n    SIPSESSION_HOLD_REQUEST,\n    holdCallRequest\n} from '../actions/sipSessions'\n\nexport const holdAll = (id: string) => {\n    const state = phoneStore.getState()\n    //@ts-ignore\n    const onHolds = state.sipSessions.onHold\n    //@ts-ignore\n    const sessions = state.sipSessions.sessions\n    for (let [sessionId, session] of Object.entries(sessions)) {\n        if (\n            onHolds.indexOf(sessionId) < 0 &&\n            sessionId !== id\n        ) {\n            try {\n                //@ts-ignore\n                holdCallRequest(session)\n                //dispatch here because class is not connected to redux actions\n                phoneStore.dispatch({\n                    type: SIPSESSION_HOLD_REQUEST,\n                    //@ts-ignore\n                    payload: session.id\n                })\n                return\n            } catch (err) {\n                return\n            }\n        }\n    }\n}\n\n\n","import { Dispatch } from 'redux';\n\nexport const AUDIO_INPUT_DEVICES_DETECTED = 'AUDIO_INPUT_DEVICES_DETECTED'\nexport const AUDIO_OUTPUT_DEVICES_DETECTED = 'AUDIO_OUTPUT_DEVICES_DETECTED'\n\nexport const REMOTE_AUDIO_CONNECTED = 'REMOTE_AUDIO_CONNECTED'\nexport const REMOTE_AUDIO_FAIL = 'REMOTE_AUDIO_FAIL'\n\nexport const LOCAL_AUDIO_CONNECTED = 'LOCAL_AUDIO_CONNECTED'\nexport const LOCAL_AUDIO_FAIL = 'REMOTE_AUDIO_FAIL'\n\nexport const SET_PRIMARY_OUTPUT = 'SET_PRIMARY_OUTPUT'\nexport const SET_PRIMARY_INPUT = 'SET_PRIMARY_INPUT'\n\nexport const SET_LOCAL_AUDIO_SESSIONS_PENDING = 'SET_LOCAL_AUDIO_SESSIONS_PENDING'\nexport const SET_LOCAL_AUDIO_SESSION_SUCCESS = 'SET_LOCAL_AUDIO_SESSION_SUCCESS'\nexport const SET_LOCAL_AUDIO_SESSION_FAIL = 'SET_LOCAL_AUDIO_SESSION_FAIL'\n\nexport const SET_REMOTE_AUDIO_SESSIONS_PENDING = 'SET_REMOTE_AUDIO_SESSIONS_PENDING'\nexport const SET_REMOTE_AUDIO_SESSION_SUCCESS = 'SET_REMOTE_AUDIO_SESSION_SUCCESS'\nexport const SET_REMOTE_AUDIO_SESSION_FAIL = 'SET_REMOTE_AUDIO_SESSION_FAIL'\n\nexport const AUDIO_SINKID_NOT_ALLOWED = 'AUDIO_SINKID_NOT_ALLOWED'\n\nexport const getInputAudioDevices = () => {\n  let inputArray: Array<Object> = []\n  navigator.mediaDevices\n    .enumerateDevices()\n    .then(function (devices: Array<Object>) {\n      devices.forEach(function (device: any) {\n        if (device.kind === 'audioinput') {\n          inputArray.push(device)\n        }\n      })\n    })\n  return {\n    type: AUDIO_INPUT_DEVICES_DETECTED,\n    payload: inputArray\n  }\n}\n\nexport const getOutputAudioDevices = () => {\n  let outputArray: Array<Object> = []\n  navigator.mediaDevices\n    .enumerateDevices()\n    .then(function (devices: Array<Object>) {\n      devices.forEach(function (device: any) {\n        if (device.kind === 'audiooutput') {\n          outputArray.push(device)\n        }\n      })\n    })\n  return {\n    type: AUDIO_OUTPUT_DEVICES_DETECTED,\n    payload: outputArray\n  }\n}\n\nexport const setPrimaryOutput = (deviceId: string, sessions: any) => (dispatch: Dispatch) => {\n  if (sessions) {\n    if (Object.keys(sessions).length > 0) {\n      dispatch({\n        type: SET_REMOTE_AUDIO_SESSIONS_PENDING\n      })\n      for (let [sessionId, _session] of Object.entries(sessions)) {\n        //@ts-ignore\n        if (_session.state === 'Established') {\n          try {\n            const mediaElement = document.getElementById(sessionId)\n            const remoteStream = new MediaStream()\n            //@ts-ignore\n            _session.sessionDescriptionHandler.peerConnection\n              //check if session is established?\n              .getReceivers()\n              .forEach((receiver: any) => {\n                if (receiver.track) {\n                  remoteStream.addTrack(receiver.track)\n                }\n              })\n            if (mediaElement) {\n              // @ts-ignore\n              mediaElement.setSinkId(\n                deviceId\n              )\n                .then(() => {\n                  // @ts-ignore\n                  mediaElement.srcObject = remoteStream\n                  //@ts-ignore\n                  mediaElement.play()\n                })\n            } else {\n              console.log('no media Element')\n            }\n          } catch (err) {\n            console.log(err)\n            dispatch({\n              type: SET_REMOTE_AUDIO_SESSION_FAIL\n            })\n            return\n          }\n        }\n        dispatch({\n          type: SET_REMOTE_AUDIO_SESSION_SUCCESS\n        })\n      }\n    }\n  }\n  dispatch({\n    type: SET_PRIMARY_OUTPUT,\n    payload: deviceId\n  })\n}\n\nexport const setPrimaryInput = (deviceId: string, sessions: any, sinkIdAllowed: boolean) => (dispatch: Dispatch) => {\n  if (sessions) {\n    if (Object.keys(sessions).length > 0) {\n      dispatch({\n        type: SET_LOCAL_AUDIO_SESSIONS_PENDING\n      })\n      for (let [sessionId, _session] of Object.entries(sessions)) {\n        //@ts-ignore\n        if (_session.state === 'Established') {\n          try {\n            //@ts-ignore\n            _session.sessionDescriptionHandler.peerConnection\n              .getSenders()\n              .forEach(function (sender: any) {\n                console.log(sessionId)\n                if (sender.track && sender.track.kind === 'audio') {\n                  let audioDeviceId =\n                    deviceId\n                  navigator.mediaDevices\n                    // @ts-ignore\n\n                    //creates a stream w track\n                    .getUserMedia({ audio: { deviceId: audioDeviceId } })\n                    .then(function (stream) {\n                      let audioTrack = stream.getAudioTracks()\n                      sender.replaceTrack(audioTrack[0])\n                    })\n                }\n              })\n          } catch (err) {\n            console.log(err)\n            dispatch({\n              type: SET_LOCAL_AUDIO_SESSION_FAIL\n            })\n            return\n          }\n        }\n        dispatch({\n          type: SET_LOCAL_AUDIO_SESSION_SUCCESS\n        })\n      }\n    }\n  }\n  dispatch({\n    type: SET_PRIMARY_INPUT,\n    payload: deviceId\n  })\n\n  //change remote audio for safari sessions  \n  if (sinkIdAllowed === false) {\n    if (sessions) {\n      if (Object.keys(sessions).length > 0) {\n        for (let [sessionId, _session] of Object.entries(sessions)) {\n          //@ts-ignore\n          if (_session.state === 'Established') {\n            try {\n              const mediaElement = document.getElementById(sessionId)\n              const remoteStream = new MediaStream()\n              //@ts-ignore\n              _session.sessionDescriptionHandler.peerConnection\n                .getReceivers()\n                .forEach((receiver: any) => {\n                  if (receiver.track) {\n                    remoteStream.addTrack(receiver.track)\n                  }\n                })\n              if (mediaElement) {\n                // @ts-ignore\n                mediaElement.srcObject = remoteStream\n                //@ts-ignore\n                mediaElement.play()\n              } else {\n                console.log('no media Element')\n              }\n            } catch (err) {\n              console.log(err)\n              dispatch({\n                type: SET_REMOTE_AUDIO_SESSION_FAIL\n              })\n              return\n            }\n          }\n          dispatch({\n            type: SET_REMOTE_AUDIO_SESSION_SUCCESS\n          })\n        }\n      }\n    }\n  }\n}\n\nexport const sinkIdAllowed = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: AUDIO_SINKID_NOT_ALLOWED\n  })\n}\n","import { phoneStore } from '../index'\nimport { Session } from 'sip.js'\n\nimport {\n  REMOTE_AUDIO_CONNECTED,\n  REMOTE_AUDIO_FAIL,\n  LOCAL_AUDIO_CONNECTED,\n  AUDIO_SINKID_NOT_ALLOWED\n} from '../actions/device'\n\n//adds track from getReceiver stream to <audio id={sessionId}> in Phone.tsx\nexport const setRemoteAudio = (session: Session) => {\n  const state = phoneStore.getState()\n  //@ts-ignore\n  const deviceId = state.device.primaryAudioOutput\n  const mediaElement = document.getElementById(session.id)\n  const remoteStream = new MediaStream()\n  //@ts-ignore\n  session.sessionDescriptionHandler.peerConnection\n    .getReceivers()\n    .forEach((receiver: any) => {\n      if (receiver.track.kind === 'audio') {\n        remoteStream.addTrack(receiver.track)\n      }\n    })\n\n  //checks for browser compatibility\n  //@ts-ignore\n  if (mediaElement && typeof mediaElement.sinkId === 'undefined') {\n    console.log('safari')\n    phoneStore.dispatch({\n      type: AUDIO_SINKID_NOT_ALLOWED\n    })\n    //@ts-ignore\n    mediaElement.srcObject = remoteStream\n    //@ts-ignore\n    mediaElement.play()\n\n    //@ts-ignore\n  } else if (mediaElement && typeof mediaElement.sinkId !== 'undefined') {\n    // @ts-ignore\n    mediaElement.setSinkId(\n      // audio output device_id\n      deviceId\n    )\n      .then(() => {\n        // @ts-ignore\n        mediaElement.srcObject = remoteStream\n        //@ts-ignore\n        mediaElement.play()\n      })\n  } else {\n    phoneStore.dispatch({\n      type: REMOTE_AUDIO_FAIL\n    })\n  }\n  phoneStore.dispatch({\n    type: REMOTE_AUDIO_CONNECTED\n  })\n}\n\n//creates new audio track then replaces audio track in getSender stream w/ new track\nexport const setLocalAudio = (session: Session) => {\n  const state = phoneStore.getState()\n  //@ts-ignore\n  const deviceId = state.device.primaryAudioInput\n  // @ts-ignore\n  session.sessionDescriptionHandler.peerConnection\n    .getSenders()\n    .forEach(function (sender: any) {\n      if (sender.track && sender.track.kind === 'audio') {\n        let audioDeviceId =\n          // audio input device_id\n          // 'default'\n          deviceId\n        navigator.mediaDevices\n          // @ts-ignore\n\n          //creates a stream w track\n          .getUserMedia({ audio: { deviceId: audioDeviceId } })\n          .then(function (stream) {\n            let audioTrack = stream.getAudioTracks()\n            sender.replaceTrack(audioTrack[0])\n          })\n      }\n    })\n  phoneStore.dispatch({\n    type: LOCAL_AUDIO_CONNECTED\n  })\n}\n\nexport const cleanupMedia = (sessionId: string) => {\n  const mediaElement = document.getElementById(sessionId)\n  if (mediaElement) {\n    // @ts-ignore\n    mediaElement.srcObject = null\n    // @ts-ignore\n    mediaElement.pause()\n  }\n}\n","//@ts-ignore\nimport Tone from 'tone'\n\nconst DTMF_MATRIX = {\n  1: [697, 1209],\n  2: [697, 1336],\n  3: [697, 1477],\n  A: [697, 1633],\n  4: [770, 1209],\n  5: [770, 1336],\n  6: [770, 1477],\n  B: [770, 1633],\n  7: [852, 1209],\n  8: [852, 1336],\n  9: [852, 1477],\n  C: [852, 1633],\n  0: [941, 1209],\n  '*': [941, 1336],\n  '#': [941, 1477],\n  D: [941, 1633]\n}\n\nconst Synth = Tone.PolySynth && new Tone.PolySynth(2, Tone.Synth)\nconst FMSynth = Tone.PolySynth && new Tone.PolySynth(2, Tone.FMSynth)\n\nexport const playDTMF = (key: any, deviceId: string) => {\n  let obj = DTMF_MATRIX[key]\n  if (!obj) {\n    console.log('invalid DTMF tone input')\n  }\n  Synth.volume.value = -22\n  Synth.set({\n    oscillator: {\n      type: 'sine'\n    },\n    envelope: {\n      attack: 0.02,\n      decay: 0.1,\n      sustain: 0.2,\n      release: 0.02\n    }\n  })\n\n  if (deviceId !== 'default') {\n    const mediaElement = document.getElementById('tone')\n\n\n    if (mediaElement) {\n      let dest = Tone.context.createMediaStreamDestination()\n      Synth.connect(dest)\n      // @ts-ignore\n      mediaElement.setSinkId(\n        // audio output device_id\n        deviceId\n      ).then(() => {\n        // @ts-ignore\n        mediaElement.srcObject = dest.stream\n        //@ts-ignore\n\n        mediaElement.play()\n      })\n\n\n    }\n  } else {\n    Synth.toMaster()\n  }\n\n  Synth.triggerAttackRelease(obj, 0.3)\n}\n\nexport const callDisconnect = (deviceId: string) => {\n  FMSynth.triggerAttack(['C4', 'E4'], '+0.1')\n  FMSynth.triggerRelease(['C4', 'E4'], '+0.14')\n  FMSynth.triggerAttack(['D4', 'G4'], '+0.14')\n  FMSynth.triggerRelease(['D4', 'G4'], '+0.18')\n  if (deviceId !== 'default') {\n    const mediaElement = document.getElementById('tone')\n\n\n    if (mediaElement) {\n      let dest = Tone.context.createMediaStreamDestination()\n      Synth.connect(dest)\n      // @ts-ignore\n      mediaElement.setSinkId(\n        // audio output device_id\n        deviceId\n      ).then(() => {\n        // @ts-ignore\n        mediaElement.srcObject = dest.stream\n        //@ts-ignore\n\n        mediaElement.play()\n      })\n\n\n    }\n\n  }\n  else {\n    FMSynth.toMaster()\n  }\n}\n\nclass TonePlayer {\n  private loop: any\n\n\n  //get audio element, set srcObj to device, and play the track\n  ringtone = (deviceId: string) => {\n    const mediaElement = document.getElementById('ringtone')\n    if (deviceId !== 'default') {\n      if (mediaElement) {\n        // @ts-ignore\n        mediaElement.setSinkId(\n          // audio output device_id\n          // 'default'\n          deviceId\n        ).then(() => {\n          // @ts-ignore\n          mediaElement.play()\n        })\n      } else {\n        console.log('no media Element')\n      }\n    } else {\n      // @ts-ignore\n      mediaElement.play()\n    }\n\n\n\n  }\n\n  ringback = (deviceId: string) => {\n    let dest = Tone.context.createMediaStreamDestination()\n    console.log(dest)\n    Synth.set({\n      oscillator: {\n        type: 'sine'\n      },\n      envelope: {\n        attack: 0.02,\n        decay: 0.1,\n        sustain: 0.2,\n        release: 0.02\n      }\n    }).connect(dest)\n    if (deviceId !== 'default') {\n      const mediaElement = document.getElementById('tone')\n      if (mediaElement) {\n        let dest = Tone.context.createMediaStreamDestination()\n        Synth.connect(dest)\n        // @ts-ignore\n        mediaElement.setSinkId(\n          // audio output device_id\n          deviceId\n        ).then(() => {\n          // @ts-ignore\n          mediaElement.srcObject = dest.stream\n          //@ts-ignore\n\n          mediaElement.play()\n        })\n      }\n    } else {\n      Synth.toMaster()\n    }\n\n    this.loop = new Tone.Loop((time: any) => {\n      Synth.triggerAttack([440, 480])\n      Synth.triggerRelease([440, 480], time + 2)\n    }, 6)\n    this.loop.start(0)\n    Tone.Transport.start()\n  }\n\n  stop() {\n    if (this.loop) {\n      try {\n        this.loop.stop(0)\n      } catch{\n        console.log('no loop to stop')\n      }\n    }\n\n    if (Tone.Transport) {\n      try {\n        Tone.Transport.stop()\n        Synth.triggerRelease([440, 480])\n      } catch{\n        console.log('no tone to stop')\n      }\n    }\n\n    const mediaElement = document.getElementById('ringtone')\n    if (mediaElement) {\n      //@ts-ignore\n      const promise = mediaElement.pause()\n      if (promise !== undefined) {\n        promise.catch((error: any) => {\n          console.log(error)\n\n        }).then(() => {\n          console.log('ringtone stopped')\n        });\n      }\n    }\n  }\n}\n\nexport default TonePlayer\n","import TonePlayer from './TonePlayer'\nimport { phoneStore } from '../index'\n\nclass ToneManager {\n  currentTone: any\n  constructor() { }\n\n  playRing(type: string) {\n    const state = phoneStore.getState()\n    //@ts-ignore\n    const deviceId = state.device.primaryAudioOutput\n    if (this.currentTone) {\n      this.currentTone.stop()\n      this.currentTone = undefined\n    }\n    if (type === 'ringback') {\n      this.currentTone = new TonePlayer()\n      this.currentTone.ringback(deviceId)\n    } else if (type == 'ringtone') {\n      this.currentTone = new TonePlayer()\n      this.currentTone.ringtone(deviceId)\n    }\n  }\n\n  stopAll() {\n    if (this.currentTone) {\n      this.currentTone.stop()\n      this.currentTone = undefined\n    }\n  }\n}\n\nconst toneManager = new ToneManager()\nexport default toneManager\n","import { phoneStore } from '../index'\nimport { SessionState, Session, UserAgent} from 'sip.js'\nimport { Transport as WebTransport } from \"sip.js/lib/platform/Web/Transport\";\n\nimport {\n  SIPSESSION_STATECHANGE, CLOSE_SESSION\n} from '../actions/sipSessions'\nimport {STRICT_MODE_SHOW_CALL_BUTTON} from '../actions/config'\nimport { holdAll } from '../util/hold'\nimport { setLocalAudio, setRemoteAudio, cleanupMedia } from './audio'\nimport toneManager from './ToneManager'\n\n\nexport class SessionStateHandler {\n  private session: Session\n  private ua : UserAgent\n  constructor(session: Session, ua:UserAgent) {\n    this.session = session\n    this.ua = ua\n  }\n\n  public stateChange = (newState: SessionState) => {\n    switch (newState) {\n      case SessionState.Establishing:\n        holdAll(this.session.id)\n        toneManager.playRing('ringback')\n        phoneStore.dispatch({\n          type: SIPSESSION_STATECHANGE\n        })\n\n        //check if session recieves a BYE message while sessionstate is establishing\n        const myTransport = (this.ua.transport as WebTransport);       \n        myTransport.on('message', (message:string) => {\n          if(message.includes(\"BYE \") && message.indexOf(\"BYE \") === 0){\n            if(this.session.state === \"Establishing\"){\n              console.log(message + 'session has recieved a BYE message when the session state is establishing')\n              //@ts-ignore\n              this.session.cancel()\n              this.session.dispose()\n              setTimeout(() => {\n                phoneStore.dispatch({\n                  type: CLOSE_SESSION,\n                  payload: this.session.id\n                })\n                toneManager.stopAll()\n                phoneStore.dispatch({\n                  type:STRICT_MODE_SHOW_CALL_BUTTON\n                })\n              }, 5000)\n              return\n            }else{\n              return\n            }\n          }\n        })\n        break\n      case SessionState.Established:\n        phoneStore.dispatch({\n          type: SIPSESSION_STATECHANGE\n        })\n        toneManager.stopAll()\n        setLocalAudio(this.session)\n        setRemoteAudio(this.session)\n        break\n      case SessionState.Terminating:\n        phoneStore.dispatch({\n          type: SIPSESSION_STATECHANGE\n        })\n        toneManager.stopAll()\n        cleanupMedia(this.session.id)\n        break\n      case SessionState.Terminated:\n        phoneStore.dispatch({\n          type: SIPSESSION_STATECHANGE\n        })\n        setTimeout(() => {\n          phoneStore.dispatch({\n            type: CLOSE_SESSION,\n            payload: this.session.id\n          })\n          toneManager.stopAll()\n          phoneStore.dispatch({\n            type:STRICT_MODE_SHOW_CALL_BUTTON\n          })\n        }, 5000)\n        break\n      default:\n        console.log(`Unknown session state change: ${newState}`)\n        break\n    }\n  }\n  \n}\n\n\n\n\nexport const getFullNumber = (number: string) => {\n  if (number.length < 10) {\n    return number\n  }\n  // @ts-ignore\n  let fullNumber = `+${phoneStore.getState().sipAccounts.sipAccount._config.defaultCountryCode}${number}`\n  if (number.includes('+') && number.length === 10) {\n    fullNumber = `${number}`\n  }\n  console.log(fullNumber)\n  return fullNumber\n}\n\nexport const statusMask = (status: string) => {\n  switch (status) {\n    case 'Established':\n      return 'Connected'\n    case 'Establishing':\n      return 'Calling...'\n    case 'Initial':\n      return 'Initial'\n    case 'Terminating':\n    case 'Terminated':\n      return 'Ended'\n    default:\n      return 'Unknown Status'\n  }\n}\n\nexport const getDurationDisplay = (duration: number) => {\n  let minutes = Math.floor(duration / 60)\n  let hours = Math.floor(minutes / 60)\n  minutes = minutes % 60\n  let seconds = duration % 60\n  let dh, dm, ds\n  if (hours && hours < 10) {\n    dh = `0${hours}:`\n  } else if (hours) {\n    dh = `${hours}:`\n  } else {\n    dh = '00:'\n  }\n  if (minutes && minutes < 10) {\n    dm = `0${minutes}:`\n  } else if (minutes) {\n    dm = `${minutes}:`\n  } else {\n    dm = '00:'\n  }\n  if (seconds && seconds < 10) {\n    ds = `0${seconds}`\n  } else if (seconds) {\n    ds = `${seconds}`\n  } else {\n    ds = '00'\n  }\n  return `${hours ? dh : ''}${dm}${ds}`\n}\n","import { phoneStore } from '../index'\nimport { SessionState, Session } from 'sip.js'\nimport {\n  SIPSESSION_STATECHANGE,\n  CLOSE_SESSION,\n} from '../actions/sipSessions'\nimport { holdAll } from '../util/hold'\nimport { setLocalAudio, setRemoteAudio, cleanupMedia } from './audio'\n\nexport class IncomingSessionStateHandler {\n  private incomingSession: Session\n  constructor(incomingSession: Session) {\n    this.incomingSession = incomingSession\n  }\n\n  public stateChange = (newState: SessionState) => {\n    switch (newState) {\n      case SessionState.Establishing:\n        phoneStore.dispatch({\n          type: SIPSESSION_STATECHANGE\n        })\n        break\n      case SessionState.Established:\n        phoneStore.dispatch({\n          type: SIPSESSION_STATECHANGE\n        })\n        holdAll(this.incomingSession.id)\n        setLocalAudio(this.incomingSession)\n        setRemoteAudio(this.incomingSession)\n        break\n      case SessionState.Terminating:\n        phoneStore.dispatch({\n          type: SIPSESSION_STATECHANGE\n        })\n        cleanupMedia(this.incomingSession.id)\n        break\n      case SessionState.Terminated:\n        phoneStore.dispatch({\n          type: SIPSESSION_STATECHANGE\n        })\n        setTimeout(() => {\n          phoneStore.dispatch({\n            type: CLOSE_SESSION,\n            payload: this.incomingSession.id\n          })\n        }, 5000)\n        break\n      default:\n        console.log(`Unknown session state change: ${newState}`)\n        break\n    }\n  }\n}\n","import {\n  Inviter,\n  Invitation,\n  Referral,\n  Registerer,\n  RegistererState,\n  RegistererOptions,\n  Session,\n  UserAgent,\n  UserAgentOptions\n} from 'sip.js'\n\nimport { TransportOptions } from 'sip.js/lib/platform/web'\nimport { phoneStore } from '../index'\nimport { NEW_USERAGENT } from '../actions/sipAccounts'\nimport { SessionStateHandler, getFullNumber } from '../util/sessions'\nimport { IncomingSessionStateHandler } from '../util/incomingSession'\n\nimport {STRICT_MODE_HIDE_CALL_BUTTON, SESSIONS_LIMIT_REACHED} from '../actions/config'\nimport { NEW_SESSION, INCOMING_CALL } from '../actions/sipSessions'\nimport { SipConfig, SipCredentials } from '../models'\n\nexport default class SIPAccount {\n  public _config: SipConfig\n  public _credentials: SipCredentials\n  public _userAgent: any\n  public _registerer: any\n\n  constructor(sipConfig: SipConfig, sipCredentials: SipCredentials) {\n    this._config = sipConfig\n    this._credentials = sipCredentials\n    const uri = UserAgent.makeURI('sip:' + sipCredentials.sipuri)\n    if (!uri) {\n      throw new Error('Failed to create URI')\n    }\n    const transportOptions: TransportOptions = {\n      server: sipConfig.websocket\n    }\n    const userAgentOptions: UserAgentOptions = {\n      autoStart: false,\n      autoStop: true,\n      noAnswerTimeout: sipConfig.noAnswerTimeout || 30,\n      logBuiltinEnabled: process.env.NODE_ENV !== 'production',\n      logConfiguration: process.env.NODE_ENV !== 'production',\n      logLevel: process.env.NODE_ENV !== 'production' ? 'debug' : 'error',\n      authorizationPassword: sipCredentials.password,\n      userAgentString: 'OTF-react-sip-phone',\n      hackWssInTransport: true,\n      transportOptions,\n      uri,\n      sessionDescriptionHandlerFactoryOptions: {\n        constraints: {\n          audio: {\n            deviceId:\n              'default'\n          },\n          video: false\n        },\n        alwaysAcquireMediaFirst: true,\n        iceCheckingTimeout: 500\n      }\n    }\n    const registererOptions: RegistererOptions = {\n      expires: 300,\n      logConfiguration: process.env.NODE_ENV !== 'production'\n    }\n\n    //check here for register\n    this._userAgent = new UserAgent(userAgentOptions)\n    this._registerer = new Registerer(this._userAgent, registererOptions)\n    this.setupDelegate() // Delegate is what handles incoming calls\n    this._userAgent.start().then(() => {\n      this._registerer.register()\n      this.setupRegistererListener()\n      // Push ua to store\n      phoneStore.dispatch({ type: NEW_USERAGENT, payload: this._userAgent })\n    })\n  }\n  \n\n  setupDelegate() {\n    this._userAgent.delegate = {\n      onInvite(invitation: Invitation): void {\n        // An Invitation is a Session\n        const incomingSession: Session = invitation\n\n        // Setup incoming session delegate\n        incomingSession.delegate = {\n          // Handle incoming REFER request.\n          onRefer(referral: Referral): void {\n            console.log(referral)\n          }\n        }\n\n        phoneStore.dispatch({ type: INCOMING_CALL, payload: incomingSession })\n\n        const stateHandler = new IncomingSessionStateHandler(incomingSession)\n        // Handle incoming session state changes.\n        incomingSession.stateChange.addListener(stateHandler.stateChange)\n      }\n    }\n  }\n\n  setupRegistererListener() {\n    this._registerer.stateChange.addListener((newState: RegistererState) => {\n      switch (newState) {\n        case RegistererState.Initial:\n          console.log('The user registration has initialized  ')\n          break\n        case RegistererState.Registered:\n          console.log('The user is registered ')\n          break\n        case RegistererState.Unregistered:\n          console.log('The user is unregistered ')\n          break\n        case RegistererState.Terminated:\n          console.log('The user is terminated ')\n          break\n      }\n    })\n  }\n\n  makeCall(number: string) {\n    let state = phoneStore.getState()\n    //@ts-ignore\n    let sessionsLimit: number = state.config.phoneConfig.sessionsLimit\n    //@ts-ignore\n    let sessionsActiveObject: Object = state.sipSessions.sessions\n    //@ts-ignore\n    let strictMode: string = state.config.appConfig.mode\n    //@ts-ignore\n    let attendedTransfersActive: number  = state.sipSessions.attendedTransfers.length\n\n    //added sessionsLimit check if outside Application makes call using sipaccount w/o using dialstring \n    let sessionsActive: number = Object.keys(sessionsActiveObject).length\n    let sessionDiff: number = sessionsActive - attendedTransfersActive\n    if (sessionDiff >= sessionsLimit){\n      phoneStore.dispatch({ type: SESSIONS_LIMIT_REACHED })\n    } else{\n    // Make a call\n    const target = UserAgent.makeURI(\n      `sip:${getFullNumber(number)}@${this._credentials.sipuri.split('@')[1]};user=phone`\n    )\n    //strict mode will remove dialstring call button on session initialization\n    if (strictMode === ('strict')){\n      phoneStore.dispatch({type:STRICT_MODE_HIDE_CALL_BUTTON})\n    }\n\n    if (target) {\n      console.log(`Calling ${number}`)\n      const inviter = new Inviter(this._userAgent, target)\n      // An Inviter is a Session\n      const outgoingSession: Session = inviter\n      // Setup outgoing session delegate\n      outgoingSession.delegate = {\n        // Handle incoming REFER request.\n        onRefer(referral: Referral): void {\n          // TODO\n          console.log('Referred: ' + referral)\n        }\n      }\n      phoneStore.dispatch({ type: NEW_SESSION, payload: outgoingSession })\n      // Handle outgoing session state changes.\n      const stateHandler = new SessionStateHandler(outgoingSession,this._userAgent )\n      outgoingSession.stateChange.addListener(stateHandler.stateChange)\n      outgoingSession\n        .invite()\n        .then(() => {\n          console.log('Invite sent!')\n        })\n        .catch((error: Error) => {\n          console.log(error)\n        })\n    } else {\n      console.log(`Failed to establish session for outgoing call to ${number}`)\n      }\n    }\n\n    \n    // toneManager.playRing('ringback')\n\n  }\n  listener(){\n        \n  }\n}\n","import * as React from 'react'\nimport { SipConfig, SipCredentials, PhoneConfig, AppConfig } from './models'\nimport SIPAccount from './lib/SipAccount'\nimport { connect } from 'react-redux'\nimport { setNewAccount } from './actions/sipAccounts'\nimport { setPhoneConfig, setCredentials, setAppConfig } from  './actions/config'\n\n// Wrapper component to do any initialization of the Sip connection.\n\ninterface Props {\n  sipCredentials: SipCredentials\n  sipConfig: SipConfig\n  phoneConfig: PhoneConfig\n  appConfig: AppConfig\n  setNewAccount: Function\n  setPhoneConfig: Function\n  setCredentials: Function\n  setAppConfig: Function\n  children: any\n}\n\nclass SipWrapper extends React.Component<Props> {\n\n  componentDidMount() {\n    console.log('mounted')\n    if (this.props.sipCredentials.password) {\n      this.initializeSip()\n    }\n  }\n\n  initializeSip() {\n    const account = new SIPAccount(this.props.sipConfig, this.props.sipCredentials)\n    this.props.setNewAccount(account)\n    this.props.setPhoneConfig(this.props.phoneConfig)\n    this.props.setAppConfig(this.props.appConfig)\n  }\n\n  render() {\n    return <React.Fragment>\n      { this.props.children }\n    </React.Fragment>\n  }\n}\nconst mapStateToProps = () => ({})\nconst actions = {\n  setNewAccount,\n  setPhoneConfig,\n  setCredentials,\n  setAppConfig\n}\nexport default connect(mapStateToProps, actions)(SipWrapper)","/* loaded by smart-asset */\nexport default require(\"./settings-24px~HQuidduc.svg\")","/* loaded by smart-asset */\nexport default require(\"./mic-24px~xExSpqQP.svg\")","/* loaded by smart-asset */\nexport default require(\"./volume_up-24px~qJQJhpOr.svg\")","import * as React from 'react'\nimport { connect } from 'react-redux'\nimport { setPrimaryInput, setPrimaryOutput, getInputAudioDevices, getOutputAudioDevices } from '../actions/device'\nimport styles from './Status.scss'\nimport Select from 'react-select';\nimport settingsIcon from '../assets/settings-24px.svg'\nimport micIcon from '../assets/mic-24px.svg'\nimport soundIcon from '../assets/volume_up-24px.svg'\nimport { PhoneConfig, AppConfig } from '../models'\n\ninterface Props {\n  phoneConfig: PhoneConfig\n  appConfig: AppConfig\n  name: string\n  inputs: any\n  outputs: any\n  primaryInput: string\n  primaryOutput: string\n  setPrimaryInput: Function\n  setPrimaryOutput: Function\n  getInputAudioDevices: Function\n  getOutputAudioDevices: Function\n  sessions: any\n  sinkIdAllowed: boolean\n}\n\nclass Status extends React.Component<Props> {\n  state = { settingsMenu: false }\n\n  componentDidMount() {\n    this.props.getInputAudioDevices()\n    this.props.getOutputAudioDevices()\n  }\n  mapOptions(options: any) {\n    const list: any = []\n    options.map((option: any) => {\n      list.push({ value: option.deviceId, label: option.label })\n    })\n    return list\n  }\n  handleChangeDevice(type: string, id: string) {\n    if (type === 'out') {\n      this.props.setPrimaryOutput(id, this.props.sessions)\n    } else {\n      this.props.setPrimaryInput(id, this.props.sessions, this.props.sinkIdAllowed)\n    }\n  }\n  render() {\n    const { props, state } = this\n    const inputs = this.mapOptions(props.inputs)\n    const outputs = this.mapOptions(props.outputs)\n    return (\n      <React.Fragment>\n        <div className={styles.container}>\n        {props.appConfig.appSize === 'large' ? \n        <div className={styles.userStringLarge} >{props.name}</div>\n        :\n        <div className={styles.userString} >{props.name}</div>\n        }\n          {props.phoneConfig.disabledFeatures.includes('settings') ? null :\n            <div\n              id={styles.settingsButton}\n              className={state.settingsMenu ? styles.on : ''}\n              onClick={() => this.setState({ settingsMenu: !state.settingsMenu })}\n            >\n              <img src={settingsIcon} />\n            </div>\n          }\n        </div>\n        {props.phoneConfig.disabledFeatures.includes('settings') ? null :\n          <div\n            id={styles.settingsMenu}\n            className={state.settingsMenu ? '' : styles.closed}\n          >\n            <hr style={{ width: '100%' }} />\n            <div className={styles.dropdownRow}>\n              <img className={styles.dropdownIcon} src={soundIcon} />\n              <Select\n                placeholder=\"Select Output...\"\n                value={outputs.find((output: any) => output.value === props.primaryOutput) || null}\n                onChange={option => this.handleChangeDevice('out', option.value)}\n                options={outputs}\n                id={styles.dropdowns}\n              />\n            </div>\n            <div className={styles.dropdownRow}>\n              <img className={styles.dropdownIcon} src={micIcon} />\n              <Select\n                placeholder=\"Select Input...\"\n                value={inputs.find((input: any) => input.value === props.primaryInput)}\n                onChange={option => this.handleChangeDevice('in', option.value)}\n                options={inputs}\n                id={styles.dropdowns}\n              />\n            </div>\n            <hr style={{ width: '100%' }} />\n          </div>\n        }\n\n      </React.Fragment>\n    )\n  }\n}\nconst mapStateToProps = (state: any) => ({\n  inputs: state.device.audioInput,\n  outputs: state.device.audioOutput,\n  primaryInput: state.device.primaryAudioInput,\n  primaryOutput: state.device.primaryAudioOutput,\n  sessions: state.sipSessions.sessions,\n  sinkIdAllowed: state.device.sinkId\n})\n\nconst actions = {\n  setPrimaryInput,\n  setPrimaryOutput,\n  getInputAudioDevices,\n  getOutputAudioDevices\n}\nexport default connect(mapStateToProps, actions)(Status)","import * as React from 'react'\nimport styles from './Phone.scss'\n\ninterface Props {\n  text: string,\n  click: Function,\n  letters: string,\n}\n\nconst DialButton = ({ text, click, letters }: Props) => {\n  return <div id=\"sip-dial-button\"\n    className={styles.dialpadButton}\n    onClick={() => click()}>\n    {text}\n    <div style={{ opacity: letters === '1' ? 0 : 1 }} className={styles.dialpadButtonLetters}>\n      {letters}\n    </div>\n  </div>\n}\n\nexport default DialButton","export const getButtonLetters = (value: string) => {\n  switch (value) {\n    case '1':\n      return '1'\n    case '2':\n      return 'ABC'\n    case '3':\n      return 'DEF'\n    case '4':\n      return 'GHI'\n    case '5':\n      return 'JKL'\n    case '6':\n      return 'MNO'\n    case '7':\n      return 'PQRS'\n    case '8':\n      return 'TUV'\n    case '9':\n      return 'WXYZ'\n    case '0':\n      return '+'\n    default:\n      return ''\n  }\n}","import * as React from 'react'\nimport { connect } from 'react-redux'\n\nimport styles from './Phone.scss'\nimport DialButton from './DialButton'\nimport { Session, SessionState } from 'sip.js'\nimport { getButtonLetters } from '../../util/buttons'\nimport { playDTMF } from '../../util/TonePlayer'\ninterface Props {\n  open: boolean\n  session: Session\n  deviceId: string\n}\n\nclass Dialpad extends React.Component<Props> {\n  topRow: any = []\n  middleRow: any = []\n  bottomRow: any = []\n\n  constructor(props: Props) {\n    super(props)\n    for (let x = 1; x < 4; x++) {\n      this.topRow.push(this.getButton(x.toString()))\n    }\n    for (let x = 4; x < 7; x++) {\n      this.middleRow.push(this.getButton(x.toString()))\n    }\n    for (let x = 7; x < 10; x++) {\n      this.bottomRow.push(this.getButton(x.toString()))\n    }\n  }\n\n  getButton(value: string) {\n    return (\n      <DialButton\n        key={value}\n        text={value}\n        letters={getButtonLetters(value)}\n        click={() => this.handleClick(value)}\n      />\n    )\n  }\n\n  handleClick(value: string) {\n    if (this.props.session.state === SessionState.Established) {\n      this.sendDTMF(value)\n      playDTMF(value, this.props.deviceId)\n    }\n  }\n\n  sendDTMF(value: string) {\n    const options = {\n      requestOptions: {\n        body: {\n          contentDisposition: 'render',\n          contentType: 'application/dtmf-relay',\n          content: `Signal=${value}\\r\\nDuration=1000`\n        }\n      }\n    }\n    this.props.session.info(options)\n  }\n\n  render() {\n    return (\n      <div className={this.props.open ? '' : styles.closed} id={styles.dialpad}>\n        <div className={styles.dialpadRow}>{this.topRow}</div>\n        <div className={styles.dialpadRow}>{this.middleRow}</div>\n        <div className={styles.dialpadRow}>{this.bottomRow}</div>\n        <div className={styles.dialpadRow}>\n          {this.getButton('*')}\n          {this.getButton('0')}\n          {this.getButton('#')}\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state: any) => ({\n  deviceId: state.device.primaryAudioOutput\n})\nconst actions = {\n\n}\nexport default connect(mapStateToProps, actions)(Dialpad)\n","/* loaded by smart-asset */\nexport default require(\"./phone_paused-24px~TWxpQtZf.svg\")","import * as React from 'react'\nimport { connect } from 'react-redux'\nimport styles from './Phone.scss'\nimport { Session, UserAgent } from 'sip.js'\n\nimport holdIcon from '../../assets/phone_paused-24px.svg'\n\nimport { holdCallRequest, unHoldCallRequest } from '../../actions/sipSessions'\n\ninterface Props {\n  session: Session\n  userAgent: UserAgent\n  holdCallRequest: Function\n  unHoldCallRequest: Function\n  onHold: Array<Object>\n  sessions: Array<Object>\n}\n\nclass Hold extends React.Component<Props> {\n  hold() {\n    if (this.checkHoldState()) {\n      this.props.unHoldCallRequest(this.props.session, this.props.onHold, this.props.sessions)\n    } else {\n      this.props.holdCallRequest(this.props.session)\n    }\n    return\n  }\n\n  checkHoldState() {\n    return this.props.onHold.includes(this.props.session.id)\n  }\n\n  render() {\n    return (\n      <button className={this.checkHoldState() ? styles.on : ''} id={styles.actionButton} onClick={() => this.hold()}>\n        <img src={holdIcon} />\n      </button>\n    )\n  }\n}\n\nconst mapStateToProps = (state: any) => ({\n  stateChanged: state.sipSessions.stateChanged,\n  sessions: state.sipSessions.sessions,\n  userAgent: state.sipAccounts.userAgent,\n  onHold: state.sipSessions.onHold\n})\nconst actions = {\n  holdCallRequest,\n  unHoldCallRequest\n}\n\nexport default connect(mapStateToProps, actions)(Hold)\n","/* loaded by smart-asset */\nexport default require(\"./mic_off-24px~bjejwOqd.svg\")","import * as React from 'react'\nimport { connect } from 'react-redux'\n\nimport styles from './Phone.scss'\nimport { Session, SessionState, UserAgent } from 'sip.js'\n\nimport micOffIcon from '../../assets/mic_off-24px.svg'\n\nimport {\n  muteRequest,\n  muteSuccess,\n  muteFail,\n  unMuteRequest,\n  unMuteSuccess,\n  unMuteFail\n} from '../../actions/sipSessions'\n\ninterface Props {\n  session: Session\n  userAgent: UserAgent\n  muteRequest: Function\n  muteSuccess: Function\n  muteFail: Function\n  unMuteRequest: Function\n  unMuteSuccess: Function\n  unMuteFail: Function\n}\n\nclass Mute extends React.Component<Props> {\n  state = {\n    onMute: false\n  }\n\n  mute() {\n    if (this.state.onMute) {\n      this.props.unMuteRequest()\n      return new Promise((resolve, reject) => {\n        if (\n          !this.props.session.sessionDescriptionHandler ||\n          this.props.session.state !== SessionState.Established\n        ) {\n          this.props.unMuteFail()\n          reject('No session to mute')\n          return\n        }\n        try {\n          const pc =\n            // @ts-ignore\n            this.props.session.sessionDescriptionHandler!.peerConnection\n          pc.getSenders().forEach(function (stream: any) {\n            if (stream.track && stream.track.kind === 'audio') {\n              stream.track.enabled = true\n            }\n          })\n          this.props.unMuteSuccess()\n          this.setState({ onMute: false })\n          resolve()\n          return\n        } catch (err) {\n          this.props.unMuteFail()\n          reject(err)\n          return\n        }\n      })\n    }\n\n    if (!this.state.onMute) {\n      return new Promise((resolve, reject) => {\n        if (\n          !this.props.session.sessionDescriptionHandler ||\n          this.props.session.state !== SessionState.Established\n        ) {\n          this.props.muteFail()\n          reject('No session to mute')\n          return\n        }\n        try {\n          this.props.muteRequest()\n          const pc =\n            // @ts-ignore\n            this.props.session.sessionDescriptionHandler!.peerConnection\n          console.log(pc.getSenders())\n          pc.getSenders().forEach(function (stream: any) {\n            if (stream.track && stream.track.kind === 'audio') {\n              stream.track.enabled = false\n            }\n          })\n          this.props.muteSuccess()\n          this.setState({ onMute: true })\n          resolve()\n          return\n        } catch (err) {\n          this.props.muteFail()\n          reject(err)\n          return\n        }\n      })\n    }\n    this.props.muteFail()\n    return\n  }\n\n  render() {\n    return (\n      <div\n        className={this.state.onMute ? styles.on : ''}\n        id={styles.actionButton} onClick={() => this.mute()}>\n        <img src={micOffIcon} />\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state: any) => ({\n  stateChanged: state.sipSessions.stateChanged,\n  sessions: state.sipSessions.sessions,\n  userAgent: state.sipAccounts.userAgent\n})\nconst actions = {\n  muteRequest,\n  muteSuccess,\n  muteFail,\n  unMuteRequest,\n  unMuteSuccess,\n  unMuteFail\n}\n\nexport default connect(mapStateToProps, actions)(Mute)\n","/* loaded by smart-asset */\nexport default require(\"./arrow_forward-24px~UJhdZXVe.svg\")","import * as React from 'react'\nimport { connect } from 'react-redux'\n\nimport styles from './Phone.scss'\n\nimport { Session, UserAgent } from 'sip.js'\nimport {\n  blindTransferRequest,\n  blindTransferSuccess,\n  blindTransferFail\n} from '../../actions/sipSessions'\nimport { getFullNumber } from '../../util/sessions'\nimport blindIcon from '../../assets/arrow_forward-24px.svg'\nimport SIPAccount from '../../lib/SipAccount'\n\ninterface Props {\n  session: Session\n  sipAccount: SIPAccount\n  userAgent: UserAgent\n  destination: string\n  blindTransferRequest: Function\n  blindTransferSuccess: Function\n  blindTransferFail: Function\n}\n\nclass BlindTransfer extends React.Component<Props> {\n  blindTransferCall() {\n    this.props.blindTransferRequest()\n    const target = UserAgent.makeURI(\n      `sip:${getFullNumber(this.props.destination)}@${this.props.sipAccount._credentials.sipuri.split('@')[1]};user=phone`\n    )\n    if (target) {\n      try {\n        this.props.session.refer(target)\n        this.props.blindTransferSuccess()\n      } catch (err) {\n        console.log(err)\n      }\n    } else {\n      this.props.blindTransferFail()\n    }\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <button\n          className={styles.transferButtons}\n          onClick={() => this.blindTransferCall()}\n        >\n          <img src={blindIcon} />\n        </button>\n      </React.Fragment>\n    )\n  }\n}\n\nconst mapStateToProps = (state: any) => ({\n  sipAccount: state.sipAccounts.sipAccount,\n  stateChanged: state.sipSessions.stateChanged,\n  sessions: state.sipSessions.sessions,\n  userAgent: state.sipAccounts.userAgent\n})\nconst actions = {\n  blindTransferRequest,\n  blindTransferSuccess,\n  blindTransferFail\n}\n\nexport default connect(mapStateToProps, actions)(BlindTransfer)\n","/* loaded by smart-asset */\nexport default require(\"./phone_in_talk-24px~DQfZjkDQ.svg\")","/* loaded by smart-asset */\nexport default require(\"./call_end-24px~HrwYCAOf.svg\")","import * as React from 'react'\nimport { connect } from 'react-redux'\nimport { phoneStore } from '../../index'\nimport { PhoneConfig } from '../../models'\nimport styles from './Phone.scss'\nimport { Session, SessionState, UserAgent, Inviter } from 'sip.js'\nimport {\n  NEW_ATTENDED_TRANSFER,\n  attendedTransferRequest,\n  attendedTransferCancel,\n  attendedTransferReady,\n  attendedTransferPending,\n  attendedTransferSuccess,\n  attendedTransferFail,\n  holdCallRequest,\n  stateChange,\n  closeSession\n} from '../../actions/sipSessions';\nimport {attendedTransferLimitReached} from '../../actions/config'\nimport Phone from './Phone'\nimport { getFullNumber } from '../../util/sessions'\nimport attendedIcon from '../../assets/phone_in_talk-24px.svg'\nimport cancelIcon from '../../assets/call_end-24px.svg'\nimport connectIcon from '../../assets/arrow_forward-24px.svg'\nimport { setLocalAudio, setRemoteAudio, cleanupMedia } from '../../util/audio'\nimport SIPAccount from '../../lib/SipAccount'\n\n\ninterface Props {\n  session: Session\n  sipAccount: SIPAccount\n  userAgent: UserAgent,\n  destination: string\n  started: Function\n  attendedTransferRequest: Function\n  attendedTransferCancel: Function\n  attendedTransferReady: Function\n  attendedTransferPending: Function\n  attendedTransferSuccess: Function\n  attendedTransferFail: Function\n  attendedTransferLimitReached: Function\n  holdCallRequest: Function\n  stateChange: Function\n  closeSession: Function\n  attendedTransfersList: Array<string>\n  phoneConfig: PhoneConfig\n}\n\nclass AttendedTransfer extends React.Component<Props> {\n  state = {\n    attendedTransferSessionPending: null,\n    attendedTransferSessionReady: null\n  }\n\n  attendedTransferCall() {\n    //check amount of attendedTranfers with phoneConfig \n    if (this.props.attendedTransfersList.length >= this.props.phoneConfig.attendedTransferLimit){\n      this.props.attendedTransferLimitReached()\n    } else {\n      this.holdAll()\n      this.props.attendedTransferRequest()\n      const target = UserAgent.makeURI(\n        `sip:${getFullNumber(this.props.destination)}@${this.props.sipAccount._credentials.sipuri.split('@')[1]};user=phone`\n      )\n      if (target) {\n        const inviter = new Inviter(this.props.userAgent, target)\n        const outgoingSession: Session = inviter\n        phoneStore.dispatch({ type: NEW_ATTENDED_TRANSFER, payload: outgoingSession })\n        this.setState({ attendedTransferSessionPending: outgoingSession })\n  \n        outgoingSession.stateChange.addListener((newState: SessionState) => {\n          switch (newState) {\n            case SessionState.Initial:\n            case SessionState.Establishing:\n              this.props.stateChange(newState, outgoingSession.id)\n              //add new session to local state\n              this.props.attendedTransferPending()\n  \n              break\n            case SessionState.Established:\n              this.setState({ attendedTransferSessionReady: outgoingSession })\n              this.props.attendedTransferReady()\n  \n              this.setState({ attendedTransferSessionPending: false })\n              this.props.stateChange(newState, outgoingSession.id)\n  \n              setLocalAudio(outgoingSession)\n              setRemoteAudio(outgoingSession)\n  \n              break\n            case SessionState.Terminating:\n              this.props.stateChange(newState, outgoingSession.id)\n              cleanupMedia(outgoingSession.id)\n              break\n            case SessionState.Terminated:\n              this.props.stateChange(newState, outgoingSession.id)\n              this.attendedTransferClear()\n              this.props.attendedTransferCancel(outgoingSession)\n              setTimeout(() => {\n                this.props.closeSession(outgoingSession.id)\n              }, 5000)\n              break\n            default:\n              console.log(`Unknown session state change: ${newState}`)\n              break\n          }\n        })\n        outgoingSession.invite().catch((error: Error) => {\n          this.props.attendedTransferFail(outgoingSession)\n          console.log(error)\n        })\n      } else {\n        console.log('Failed to makeURI')\n      }\n    }\n  }\n\n  attendedTransferClear() {\n    this.setState({ attendedTransferSessionPending: null })\n    this.setState({ attendedTransferSessionReady: null })\n    this.props.started(false)\n  }\n\n  //refers the session in local state\n  connectAttendedTransfer(attendedTransferSession: any) {\n    try {\n      this.props.session.refer(attendedTransferSession)\n      this.props.attendedTransferSuccess()\n      this.setState({ attendedTransferSessionReady: null })\n    } catch (err) {\n      console.log(err)\n    }\n  }\n\n  cancelAttendedTransfer(attendedTransferSession: any) {\n    attendedTransferSession.cancel()\n    this.props.attendedTransferCancel(attendedTransferSession)\n    this.setState({ attendedTransferSessionPending: null })\n    this.setState({ attendedTransferSession: null })\n  }\n\n  holdAll() {\n    const state = phoneStore.getState()\n\n    //@ts-ignore\n    const onHolds = state.sipSessions.onHold\n\n    //@ts-ignore\n    const sessions = state.sipSessions.sessions\n\n    if (this.props.session.id in onHolds === false) {\n      try {\n        //@ts-ignore\n        this.props.holdCallRequest(this.props.session)\n\n        return\n      } catch (err) {\n        return\n      }\n    }\n  }\n\n  render() {\n    if (this.state.attendedTransferSessionReady) {\n      const phoneConfigAttended: PhoneConfig = { disabledButtons: ['numpad', 'transfer'] , disabledFeatures:[''],  defaultDial: '', sessionsLimit:0, attendedTransferLimit:0}\n      return (\n        <React.Fragment>{\n          // @ts-ignore\n          <Phone session={this.state.attendedTransferSessionReady} phoneConfig={phoneConfigAttended}\n           />\n        }\n          <button\n            className={styles.transferButtons}\n            onClick={() => {\n              this.props.started(false)\n              this.connectAttendedTransfer(this.state.attendedTransferSessionReady)\n            }}>\n            <img src={connectIcon} />\n          </button>\n        </React.Fragment>\n\n      )\n    } else if (this.state.attendedTransferSessionPending) {\n      return (\n        <button\n          className={styles.endCallButton}\n          onClick={() => {\n            this.props.started(false)\n            this.cancelAttendedTransfer(this.state.attendedTransferSessionPending)\n          }}>\n          <img src={cancelIcon} />\n        </button>\n      )\n    } else {\n      return (\n        <button\n          className={styles.transferButtons}\n          onClick={() => {\n            this.props.started(true)\n            this.attendedTransferCall()\n          }}>\n          <img src={attendedIcon} />\n        </button>\n      )\n    }\n  }\n}\n\nconst mapStateToProps = (state: any) => ({\n  sipAccount: state.sipAccounts.sipAccount,\n  stateChanged: state.sipSessions.stateChanged,\n  sessions: state.sipSessions.sessions,\n  userAgent: state.sipAccounts.userAgent,\n  attendedTransfersList: state.sipSessions.attendedTransfers,\n  phoneConfig:state.config.phoneConfig\n})\nconst actions = {\n  holdCallRequest,\n  attendedTransferRequest,\n  attendedTransferCancel,\n  attendedTransferReady,\n  attendedTransferPending,\n  attendedTransferSuccess,\n  attendedTransferFail,\n  attendedTransferLimitReached,\n  stateChange,\n  closeSession,\n}\n\nexport default connect(mapStateToProps, actions)(AttendedTransfer)","/* loaded by smart-asset */\nexport default require(\"./dialpad-24px~cidqBzRK.svg\")","import * as React from 'react'\nimport Dialpad from './Dialpad'\nimport { connect } from 'react-redux'\nimport { Session, SessionState, UserAgent } from 'sip.js'\nimport { endCall } from '../../actions/sipSessions'\nimport {setAppConfigStarted} from '../../actions/config'\nimport Hold from './Hold'\nimport Mute from './Mute'\nimport BlindTranfer from './BlindTransfer'\nimport AttendedTransfer from './AttendedTransfer'\nimport styles from './Phone.scss'\nimport endCallIcon from '../../assets/call_end-24px.svg'\nimport dialpadIcon from '../../assets/dialpad-24px.svg'\nimport transferIcon from '../../assets/arrow_forward-24px.svg'\nimport { callDisconnect } from '../../util/TonePlayer'\nimport toneManager from '../../util/ToneManager'\nimport { statusMask, getDurationDisplay } from '../../util/sessions'\nimport { PhoneConfig } from '../../models'\n\ninterface Props {\n  session: Session\n  userAgent: UserAgent\n  endCall: Function\n  setAppConfigStarted: Function\n  phoneConfig: PhoneConfig\n  deviceId: string\n  strictMode: string\n  appSize: string\n}\n\nclass Phone extends React.Component<Props> {\n  state = {\n    dialpadOpen: false,\n    transferMenu: false,\n    ended: false,\n    transferDialString: '',\n    attendedTransferStarted: false,\n    duration: 0,\n    counterStarted: false\n  }\n\n  constructor(props: any) {\n    super(props)\n    this.attendedProcess = this.attendedProcess.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.props.phoneConfig.disabledButtons.includes('dialpadopen')) {\n      this.setState({ dialpadOpen: true })\n    }\n  }\n\n  componentDidUpdate(newProps: Props) {\n    if (newProps.session.state === SessionState.Established && !this.state.counterStarted) {\n      this.handleCounter()\n    }\n    if (\n      newProps.session.state === SessionState.Terminated &&\n      this.state.ended === false\n    ) {\n      this.setState({ ended: true })\n    }\n  }\n\n  endCall() {\n    if (this.props.session.state === SessionState.Established) {\n      this.props.session.bye()\n    } else if (\n      this.props.session.state === SessionState.Initial ||\n      this.props.session.state === SessionState.Establishing\n    ) {\n      toneManager.stopAll()\n      callDisconnect(this.props.deviceId)\n      // @ts-ignore\n      this.props.session.cancel()\n    }\n    this.setState({ ended: true })\n    setTimeout(() => {\n      this.props.session.dispose()\n      this.props.endCall(this.props.session.id)\n      if(this.props.strictMode === 'strict'){\n        this.props.setAppConfigStarted()\n      }\n    }, 5000)\n  }\n\n  attendedProcess(bool: boolean) {\n    this.setState({ attendedTransferStarted: bool })\n  }\n\n  handleCounter() {\n    if (this.props.session && this.props.session.state !== SessionState.Terminated) {\n      if (this.state.counterStarted === false) {\n        this.setState({ counterStarted: true })\n      }\n      setTimeout(() => {\n        this.setState({ duration: this.state.duration + 1 })\n        this.handleCounter()\n      }, 1000)\n    }\n  }\n\n  render() {\n    const { state, props } = this\n    let durationDisplay\n    if(props.appSize === 'large'){\n      if ((this.props.session.state === SessionState.Initial ||\n        this.props.session.state === SessionState.Establishing)){\n          durationDisplay = null\n        } else {\n          durationDisplay = <div className={styles.statusLarge}>{getDurationDisplay(this.state.duration)}</div>\n        }\n    } else {\n      if ((this.props.session.state === SessionState.Initial ||\n        this.props.session.state === SessionState.Establishing)){\n          durationDisplay =  null\n        } else {\n          durationDisplay = <div>{getDurationDisplay(this.state.duration)}</div>\n        }\n    }\n    return (\n      <React.Fragment>\n        <hr style={{ width: '100%' }} />\n        {props.phoneConfig.disabledFeatures.includes('remoteid') ? null :\n          <div>{\n            // @ts-ignore\n            `${props.session.remoteIdentity.uri.normal.user} - ${props.session.remoteIdentity._displayName}`}\n            <br />\n          </div>}\n        {props.appSize === 'large' ? \n        <div className={styles.statusLarge} >{statusMask(props.session.state)}</div>\n        :\n        <div >{statusMask(props.session.state)}</div>\n        }\n        <br />\n        {durationDisplay}\n        {\n          state.ended ? null :\n            <React.Fragment>\n              <Dialpad open={state.dialpadOpen} session={props.session} />\n              <div className={styles.actionsContainer}>\n                {props.phoneConfig.disabledButtons.includes('mute') ? null :\n                  <Mute session={props.session} />}\n                <button\n                  className={styles.endCallButton}\n                  disabled={state.ended}\n                  onClick={() => this.endCall()}\n                >\n                  <img src={endCallIcon} />\n                </button>\n                {props.phoneConfig.disabledButtons.includes('hold') ? null :\n                  <Hold session={props.session} />}\n                {props.phoneConfig.disabledButtons.includes('numpad') ? null :\n                  <div\n                    id={styles.actionButton}\n                    className={state.dialpadOpen ? styles.on : ''}\n                    onClick={() => this.setState({ dialpadOpen: !state.dialpadOpen })}\n                  >\n                    <img src={dialpadIcon} />\n                  </div>}\n                {props.phoneConfig.disabledButtons.includes('transfer') ? null :\n                  <div\n                    id={styles.actionButton}\n                    className={state.transferMenu ? styles.on : ''}\n                    onClick={() => this.setState({ transferMenu: !state.transferMenu })}\n                  >\n                    <img src={transferIcon} />\n                  </div>}\n                <div\n                  id={styles.transferMenu}\n                  className={state.transferMenu ? '' : styles.closed}\n                >\n                  <input\n                    id={styles.transferInput}\n                    onChange={(e) =>\n                      this.setState({ transferDialString: e.target.value })\n                    }\n                    placeholder=\"Enter the transfer destination...\"\n                  />\n                  {this.state.attendedTransferStarted ? null :\n                    <BlindTranfer\n                      destination={state.transferDialString}\n                      session={props.session}\n                    />}\n                  <AttendedTransfer\n                    started={this.attendedProcess}\n                    destination={state.transferDialString}\n                    session={props.session}\n                  />\n                </div>\n              </div>\n              <audio id={this.props.session.id} autoPlay />\n\n            </React.Fragment>\n        }\n      </React.Fragment>\n    )\n  }\n}\nconst mapStateToProps = (state: any) => ({\n  stateChanged: state.sipSessions.stateChanged,\n  sessions: state.sipSessions.sessions,\n  userAgent: state.sipAccounts.userAgent,\n  deviceId: state.device.primaryAudioOutput,\n  strictMode: state.config.appConfig.mode,\n  appSize: state.config.appConfig.appSize\n})\nconst actions = {\n  endCall,\n  setAppConfigStarted\n}\nexport default connect(mapStateToProps, actions)(Phone)","/* loaded by smart-asset */\nexport default require(\"./call-24px~AGZUevvA.svg\")","import * as React from 'react'\nimport { Invitation } from 'sip.js'\nimport { connect } from 'react-redux'\nimport styles from './Phone.scss'\nimport { acceptCall, declineCall } from '../../actions/sipSessions'\nimport acceptIcon from '../../assets/call-24px.svg'\nimport declineIcon from '../../assets/call_end-24px.svg'\nimport toneManager from '../../util/ToneManager'\n\nconst ring = require('./assets/ring.mp3')\ninterface Props {\n  session: Invitation,\n  acceptCall: Function,\n  declineCall: Function\n}\n\nclass Incoming extends React.Component<Props> {\n\n  componentDidMount() {\n    toneManager.stopAll()\n    toneManager.playRing('ringtone')\n  }\n\n  handleAccept() {\n    toneManager.stopAll()\n    this.props.session.accept({\n      sessionDescriptionHandlerOptions: {\n        constraints: {\n          audio: true,\n          video: false\n        },\n      },\n    })\n    this.props.acceptCall(this.props.session)\n  }\n\n  handleDecline() {\n    toneManager.stopAll()\n    this.props.session.reject()\n    this.props.declineCall(this.props.session)\n  }\n\n  render() {\n    const props = this.props\n    return <div id={styles.incoming}>\n      {\n        // @ts-ignore\n        `Incoming: ${props.session.remoteIdentity.uri.normal.user} - ${props.session.remoteIdentity._displayName}`\n      }\n      <div className={styles.endCallButton} onClick={() => this.handleDecline()} ><img src={declineIcon} /></div>\n      <div className={styles.startCallButton} onClick={() => this.handleAccept()} ><img src={acceptIcon} /></div>\n      <audio id='ringtone' loop >\n        <source src={ring} type=\"audio/mpeg\" />\n      </audio>\n      <audio id={this.props.session.id} />\n    </div>\n  }\n}\n\nconst mapStateToProps = (state: any) => ({\n  stateChanged: state.sipSessions.stateChanged,\n})\nconst actions = {\n  acceptCall, declineCall\n}\nexport default connect(mapStateToProps, actions)(Incoming)","import * as React from 'react'\nimport { connect } from 'react-redux'\nimport Phone from './phone/Phone'\nimport Incoming from './phone/Incoming'\nimport { PhoneConfig } from '../models'\n\nconst getSessions = (sessions: any, phoneConfig: PhoneConfig, attendedTransfers: Array<string>, incomingCalls: Array<string>) => {\n  const elements = []\n  for (const session in sessions) {\n    if (attendedTransfers.includes(session)) continue\n    if (incomingCalls.includes(session)) {\n      if (Object.keys(sessions).length >= phoneConfig.sessionsLimit + incomingCalls.length){\n        console.log('Unable to create more sessions... please check your phoneConfig options')\n      }else{\n        elements.push(<Incoming session={sessions[session]} key={session} />)\n      }\n    } else {\n      elements.push(\n        <Phone session={sessions[session]} key={session} phoneConfig={phoneConfig} />\n      )\n    }\n  }\n  return elements\n}\n\ninterface Props {\n  sessions: Object\n  incomingCalls: Array<string>\n  phoneConfig: PhoneConfig\n  attendedTransfers: Array<string>\n}\n\nclass PhoneSessions extends React.Component<Props> {\n  render() {\n    return <React.Fragment>\n      {/* {<Phone \n        // @ts-ignore\n        session={{}} key={0} />} */}\n      {getSessions(this.props.sessions, this.props.phoneConfig, this.props.attendedTransfers, this.props.incomingCalls)}\n    </React.Fragment>\n  }\n}\nconst mapStateToProps = (state: any) => ({\n  sessions: state.sipSessions.sessions,\n  incomingCalls: state.sipSessions.incomingCalls,\n  attendedTransfers: state.sipSessions.attendedTransfers\n})\nconst PS = connect(mapStateToProps)(PhoneSessions)\nexport default PS","/* loaded by smart-asset */\nexport default require(\"./call-large-40px~tyHaARth.svg\")","import * as React from 'react'\nimport { connect } from 'react-redux'\nimport SIPAccount from '../lib/SipAccount'\nimport styles from './Dialstring.scss'\nimport callIcon from '../assets/call-24px.svg'\nimport callIconLarge from '../assets/call-large-40px.svg'\n\nimport { PhoneConfig, SipConfig, AppConfig } from '../models'\nimport {sessionsLimitReached} from '../actions/config'\ninterface Props {\n  sipAccount: SIPAccount\n  phoneConfig: PhoneConfig\n  sipConfig: SipConfig\n  appConfig: AppConfig\n  sessions: Object\n  started: Boolean\n  sessionsLimitReached: Function\n  attendedTransfersList: Array<string>\n}\n\nclass Dialstring extends React.Component<Props> {\n  state = {\n    currentDialString: ''\n  }\n  handleDial() {\n    let sessionsActive: number = Object.keys(this.props.sessions).length\n    let attendedTransferActive: number  = this.props.attendedTransfersList.length\n    let sessionDiff: number = sessionsActive - attendedTransferActive\n\n    //sessionsLimit check\n    if ( sessionDiff >= this.props.phoneConfig.sessionsLimit){\n      this.props.sessionsLimitReached()\n    } else{\n    //strict-mode check \n      if (this.props.appConfig.mode === 'strict'){\n        this.props.sipAccount.makeCall(this.props.phoneConfig.defaultDial)\n      }\n    //dialstring check \n      if (!this.checkDialstring()) {\n        this.props.sipAccount.makeCall(`${this.state.currentDialString}`)\n      }\n    }\n  }\n  \n  checkDialstring() {\n    return this.state.currentDialString.length === 0\n  }\n\n  render() {\n    const { props } = this\n    if (props.appConfig.mode.includes('strict') && props.started === true){\n      return  (\n        <div className={styles.dialstringContainerStrict}>\n        <button\n        className={styles.dialButtonStrict}\n        onClick={() => this.handleDial()}\n        >\n          <img src={callIconLarge} />\n        </button> \n        </div>\n      )\n    }else if (props.appConfig.mode.includes('strict')){\n      return null\n    } else{\n      return (\n        <div className={styles.dialstringContainer}>\n        <input\n          className={styles.dialInput}\n          onKeyPress={(e) => {\n            if (e.key === 'Enter') {\n              this.handleDial()\n              e.preventDefault()\n            }\n          }}\n          placeholder=\"Enter the number to dial...\"\n          onChange={(e) => this.setState({ currentDialString: e.target.value })}\n        />\n        <button\n          className={styles.dialButton}\n          disabled={this.checkDialstring()}\n          onClick={() => this.handleDial()}\n        >\n          <img src={callIcon} />\n        </button>\n      </div>\n      )\n    }\n  }\n}\n\nconst mapStateToProps = (state: any) => ({\n  sipAccount: state.sipAccounts.sipAccount,\n  sessions: state.sipSessions.sessions,\n  started:state.config.appConfig.started,\n  attendedTransfersList: state.sipSessions.attendedTransfers\n})\n\nconst actions = {\n  sessionsLimitReached\n}\n\nconst D = connect(mapStateToProps, actions)(Dialstring)\nexport default D\n","import { Action } from './models'\nimport {\n  NEW_SESSION,\n  NEW_ATTENDED_TRANSFER,\n  SIPSESSION_ATTENDED_TRANSFER_CANCEL,\n  SIPSESSION_ATTENDED_TRANSFER_FAIL,\n  CLOSE_SESSION,\n  SIPSESSION_STATECHANGE,\n  INCOMING_CALL,\n  ACCEPT_CALL,\n  DECLINE_CALL,\n  SIPSESSION_HOLD_REQUEST,\n  SIPSESSION_UNHOLD_REQUEST\n} from '../actions/sipSessions'\nconst sipSessions = (\n  state = {\n    sessions: {},\n    incomingCalls: [],\n    stateChanged: 0,\n    onHold: [],\n    attendedTransfers: []\n  },\n  action: Action\n) => {\n  const { type, payload } = action\n  switch (type) {\n    case INCOMING_CALL:\n      console.log('Incoming call')\n      return {\n        ...state,\n        sessions: { ...state.sessions, [payload.id]: payload },\n        incomingCalls: [...state.incomingCalls, payload.id]\n      }\n    case NEW_SESSION:\n      console.log('New session added')\n      return {\n        ...state,\n        sessions: { ...state.sessions, [payload.id]: payload }\n      }\n    case NEW_ATTENDED_TRANSFER:\n      return {\n        ...state,\n        sessions: { ...state.sessions, [payload.id]: payload },\n        attendedTransfers: [...state.attendedTransfers, payload.id]\n      }\n    case SIPSESSION_ATTENDED_TRANSFER_CANCEL:\n    case SIPSESSION_ATTENDED_TRANSFER_FAIL:\n      const newAttendedTransfers = [...state.attendedTransfers].filter((id) => id !== payload.id)\n        return {\n          ...state,\n          attendedTransfers: newAttendedTransfers\n        }\n    case ACCEPT_CALL:\n      const acceptedIncoming = [...state.incomingCalls].filter((id) => id !== payload.id)\n      return {\n        ...state,\n        incomingCalls: acceptedIncoming\n      }\n    case DECLINE_CALL:\n      const declinedIncoming = [...state.incomingCalls].filter((id) => id !== payload.id)\n      const declinedSessions: any = { ...state.sessions }\n      delete declinedSessions[payload.id]\n      return {\n        ...state,\n        incomingCalls: declinedIncoming,\n        sessions: declinedSessions\n      }\n    case SIPSESSION_STATECHANGE:\n      return {\n        ...state,\n        stateChanged: state.stateChanged + 1\n      }\n    case CLOSE_SESSION:\n      const closedIncoming = [...state.incomingCalls].filter((id) => id !== payload)\n      const newSessions: any = { ...state.sessions }\n      delete newSessions[payload]\n      const endHold = [...state.onHold].filter((id) => id !== payload)\n\n      return {\n        ...state,\n        sessions: newSessions,\n        incomingCalls: closedIncoming,\n        onHold: endHold\n      }\n    case SIPSESSION_HOLD_REQUEST:\n      return {\n        ...state,\n        onHold: [...state.onHold, payload]\n      }\n    case SIPSESSION_UNHOLD_REQUEST:\n      const newHold = [...state.onHold].filter((id) => id !== payload)\n\n      return {\n        ...state,\n        onHold: newHold\n      }\n    default:\n      return state\n  }\n}\nexport default sipSessions\n","import { Action } from './models'\nimport { NEW_USERAGENT, NEW_ACCOUNT } from '../actions/sipAccounts'\nconst sipAccounts = (\n  state = {\n    sipAccount: null,\n    userAgent: null,\n    status: ''\n  },\n  action: Action\n) => {\n  const { type, payload } = action\n  switch (type) {\n    case NEW_ACCOUNT:\n      return {\n        ...state,\n        sipAccount: action.payload\n      }\n    case NEW_USERAGENT:\n      return {\n        ...state,\n        userAgent: payload\n      }\n    default:\n      return state\n  }\n}\nexport default sipAccounts\n","import { Action } from './models'\nimport {\n    AUDIO_INPUT_DEVICES_DETECTED,\n    AUDIO_OUTPUT_DEVICES_DETECTED,\n    SET_PRIMARY_INPUT,\n    SET_PRIMARY_OUTPUT,\n    AUDIO_SINKID_NOT_ALLOWED\n} from '../actions/device'\nconst device = (\n    state = {\n        audioInput: [],\n        audioOutput: [],\n        primaryAudioOutput: 'default',\n        primaryAudioInput: 'default',\n        sinkId: true\n    },\n    action: Action\n) => {\n    const { type, payload } = action\n    switch (type) {\n        case AUDIO_INPUT_DEVICES_DETECTED:\n            return {\n                ...state,\n                audioInput: payload\n            }\n        case AUDIO_OUTPUT_DEVICES_DETECTED:\n            return {\n                ...state,\n                audioOutput: payload\n            }\n        case SET_PRIMARY_OUTPUT:\n            return {\n                ...state,\n                primaryAudioOutput: payload\n            }\n        case SET_PRIMARY_INPUT:\n            return {\n                ...state,\n                primaryAudioInput: payload\n            }\n        case AUDIO_SINKID_NOT_ALLOWED:\n            return {\n                ...state,\n                sinkId: false\n            }\n        default:\n            return state\n    }\n}\nexport default device\n","import { Action } from './models'\nimport { SET_CREDENTIALS, SET_PHONE_CONFIG, SET_APP_CONFIG, STRICT_MODE_SHOW_CALL_BUTTON, STRICT_MODE_HIDE_CALL_BUTTON } from '../actions/config'\nconst config = (state = {\n  uri: '',\n  password: '',\n  phoneConfig: {},\n  appConfig:{\n    mode:'',\n    started:false,\n    appSize:''\n  }\n}, action: Action) => {\n  switch (action.type) {\n    case SET_PHONE_CONFIG:\n      return {\n        ...state, phoneConfig: action.payload\n      }\n    case SET_CREDENTIALS:\n      return {\n        ...state,\n        uri: action.payload.uri,\n        password: action.payload.password,\n      }\n    case SET_APP_CONFIG:\n      return {\n        ...state,\n        appConfig:action.payload\n      }\n    case STRICT_MODE_SHOW_CALL_BUTTON:\n      if(state.appConfig.mode === 'strict'){\n        return {\n          ...state,\n          appConfig:{\n            ...state.appConfig,\n            mode:'strict',\n            started:true\n          }\n        }\n      }\n      case STRICT_MODE_HIDE_CALL_BUTTON:\n        if(state.appConfig.mode === 'strict'){\n          return {\n            ...state,\n            appConfig:{\n              ...state.appConfig,\n              mode:'strict',\n              started:false\n          }\n        }\n      }\n    default:\n      return state\n  }\n}\nexport default config","import { combineReducers } from 'redux'\nimport sipSessions from './sipSessions'\nimport sipAccounts from './sipAccounts'\nimport device from './device'\nimport config from './config'\n\nconst reducers: any = combineReducers({ sipAccounts, sipSessions, device, config })\n\nexport default reducers","import { composeWithDevTools } from 'redux-devtools-extension'\nimport { createStore, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk'\nimport { persistStore, persistReducer } from 'redux-persist'\nimport storage from 'redux-persist/lib/storage'\nimport reducers from '../reducers/index'\n\nconst middleware = [thunk]\n\nconst persistConfig = {\n  key: 'root',\n  storage,\n  whitelist: ['device']\n}\n\nconst persistedReducer = persistReducer(persistConfig, reducers)\n\nexport const defaultStore = createStore(\n  persistedReducer,\n  composeWithDevTools(applyMiddleware(...middleware))\n)\nexport const persistor = persistStore(defaultStore)\n\n\n","import * as React from 'react'\nimport { Provider } from 'react-redux'\nimport { PersistGate } from 'redux-persist/integration/react'\nimport styles from './styles.scss'\nimport SipWrapper from './SipWrapper'\nimport Status from './components/Status'\nimport PhoneSessions from './components/PhoneSessions'\nimport Dialstring from './components/Dialstring'\nimport { SipConfig, SipCredentials, PhoneConfig, AppConfig } from './models'\n\nimport { defaultStore, persistor } from './store/configureStore'\n\ninterface Props {\n  width: number\n  height: number\n  name: string\n  phoneConfig: PhoneConfig\n  sipCredentials: SipCredentials\n  sipConfig: SipConfig\n  appConfig: AppConfig\n  containerStyle: any\n}\n\nexport const phoneStore = defaultStore\n\nexport const ReactSipPhone = ({\n  name,\n  width = 300,\n  height = 600,\n  phoneConfig,\n  sipConfig,\n  appConfig,\n  sipCredentials,\n  containerStyle = {}\n}: Props) => {\n  //If no store is passed into component, default store is used\n  return (\n    <Provider store={phoneStore}>\n      <PersistGate loading={null} persistor={persistor}>\n        <SipWrapper sipConfig={sipConfig} sipCredentials={sipCredentials} phoneConfig={phoneConfig} appConfig={appConfig}>\n          <div className={styles.container}\n            style={{\n              ...containerStyle,\n              width: `${width < 300 ? 300 : width}px`,\n              height: `${height < 600 ? 600 : height}px`\n            }}>\n            <Status phoneConfig={phoneConfig} appConfig={appConfig} name={name} />\n            {phoneConfig.disabledFeatures.includes('dialstring') ? null :\n              <Dialstring sipConfig={sipConfig} phoneConfig={phoneConfig} appConfig={appConfig}/>}\n\n            <PhoneSessions phoneConfig={phoneConfig} />\n            <audio id='tone' autoPlay />\n          </div>\n        </SipWrapper>\n      </PersistGate>\n    </Provider>\n  )\n}\n"],"names":["NEW_USERAGENT","NEW_ACCOUNT","setNewAccount","account","type","payload","NEW_SESSION","NEW_ATTENDED_TRANSFER","INCOMING_CALL","ACCEPT_CALL","DECLINE_CALL","SIPSESSION_STATECHANGE","CLOSE_SESSION","SIPSESSION_HOLD_REQUEST","SIPSESSION_HOLD_FAIL","SIPSESSION_UNHOLD_REQUEST","SIPSESSION_UNHOLD_FAIL","SIPSESSION_MUTE_REQUEST","SIPSESSION_MUTE_SUCCESS","SIPSESSION_MUTE_FAIL","SIPSESSION_UNMUTE_REQUEST","SIPSESSION_UNMUTE_SUCCESS","SIPSESSION_UNMUTE_FAIL","SIPSESSION_BLIND_TRANSFER_REQUEST","SIPSESSION_BLIND_TRANSFER_SUCCESS","SIPSESSION_BLIND_TRANSFER_FAIL","SIPSESSION_ATTENDED_TRANSFER_REQUEST","SIPSESSION_ATTENDED_TRANSFER_PENDING","SIPSESSION_ATTENDED_TRANSFER_READY","SIPSESSION_ATTENDED_TRANSFER_CANCEL","SIPSESSION_ATTENDED_TRANSFER_FAIL","SIPSESSION_ATTENDED_TRANSFER_SUCCESS","stateChange","newState","id","dispatch","state","closeSession","acceptCall","session","declineCall","endCall","sessionId","holdCallRequest","sessionDescriptionHandler","SessionState","Established","invite","sessionDescriptionHandlerModifiers","holdModifier","err","unHoldCallRequest","onHolds","sessions","_session","Object","entries","indexOf","blindTransferRequest","blindTransferSuccess","blindTransferFail","attendedTransferRequest","attendedTransferCancel","attendedTransferReady","attendedTransferPending","attendedTransferSuccess","attendedTransferFail","muteRequest","muteSuccess","muteFail","unMuteRequest","unMuteSuccess","unMuteFail","SET_CREDENTIALS","SET_PHONE_CONFIG","SET_APP_CONFIG","STRICT_MODE_SHOW_CALL_BUTTON","STRICT_MODE_HIDE_CALL_BUTTON","ATTENDED_TRANSFER_LIMIT_REACHED","SESSIONS_LIMIT_REACHED","setCredentials","uri","password","setPhoneConfig","config","setAppConfig","setAppConfigStarted","attendedTransferLimitReached","sessionsLimitReached","holdAll","phoneStore","getState","sipSessions","onHold","AUDIO_INPUT_DEVICES_DETECTED","AUDIO_OUTPUT_DEVICES_DETECTED","REMOTE_AUDIO_CONNECTED","REMOTE_AUDIO_FAIL","LOCAL_AUDIO_CONNECTED","SET_PRIMARY_OUTPUT","SET_PRIMARY_INPUT","SET_LOCAL_AUDIO_SESSIONS_PENDING","SET_LOCAL_AUDIO_SESSION_SUCCESS","SET_LOCAL_AUDIO_SESSION_FAIL","SET_REMOTE_AUDIO_SESSIONS_PENDING","SET_REMOTE_AUDIO_SESSION_SUCCESS","SET_REMOTE_AUDIO_SESSION_FAIL","AUDIO_SINKID_NOT_ALLOWED","getInputAudioDevices","inputArray","navigator","mediaDevices","enumerateDevices","then","devices","forEach","device","kind","push","getOutputAudioDevices","outputArray","setPrimaryOutput","deviceId","keys","length","mediaElement","document","getElementById","remoteStream","MediaStream","peerConnection","getReceivers","receiver","track","addTrack","setSinkId","srcObject","play","console","log","setPrimaryInput","sinkIdAllowed","getSenders","sender","audioDeviceId","getUserMedia","audio","stream","audioTrack","getAudioTracks","replaceTrack","setRemoteAudio","primaryAudioOutput","sinkId","setLocalAudio","primaryAudioInput","cleanupMedia","pause","DTMF_MATRIX","A","B","C","D","Synth","Tone","PolySynth","FMSynth","playDTMF","key","obj","volume","value","set","oscillator","envelope","attack","decay","sustain","release","dest","context","createMediaStreamDestination","connect","toMaster","triggerAttackRelease","callDisconnect","triggerAttack","triggerRelease","TonePlayer","constructor","loop","Loop","time","start","Transport","stop","promise","undefined","catch","error","ToneManager","playRing","currentTone","ringback","ringtone","stopAll","toneManager","SessionStateHandler","ua","Establishing","myTransport","transport","on","message","includes","cancel","dispose","setTimeout","Terminating","Terminated","getFullNumber","number","fullNumber","sipAccounts","sipAccount","_config","defaultCountryCode","statusMask","status","getDurationDisplay","duration","minutes","Math","floor","hours","seconds","dh","dm","ds","IncomingSessionStateHandler","incomingSession","SIPAccount","sipConfig","sipCredentials","_credentials","UserAgent","makeURI","sipuri","Error","transportOptions","server","websocket","userAgentOptions","autoStart","autoStop","noAnswerTimeout","logBuiltinEnabled","process","env","NODE_ENV","logConfiguration","logLevel","authorizationPassword","userAgentString","hackWssInTransport","sessionDescriptionHandlerFactoryOptions","constraints","video","alwaysAcquireMediaFirst","iceCheckingTimeout","registererOptions","expires","_userAgent","_registerer","Registerer","setupDelegate","register","setupRegistererListener","delegate","onInvite","invitation","onRefer","referral","stateHandler","addListener","RegistererState","Initial","Registered","Unregistered","makeCall","sessionsLimit","phoneConfig","sessionsActiveObject","strictMode","appConfig","mode","attendedTransfersActive","attendedTransfers","sessionsActive","sessionDiff","target","split","inviter","Inviter","outgoingSession","listener","SipWrapper","React","componentDidMount","props","initializeSip","render","children","mapStateToProps","actions","require","Status","settingsMenu","mapOptions","options","list","map","option","label","handleChangeDevice","inputs","outputs","className","styles","container","appSize","userStringLarge","name","userString","disabledFeatures","settingsButton","onClick","setState","src","settingsIcon","closed","style","width","dropdownRow","dropdownIcon","soundIcon","Select","placeholder","find","output","primaryOutput","onChange","dropdowns","micIcon","input","primaryInput","audioInput","audioOutput","DialButton","text","click","letters","dialpadButton","opacity","dialpadButtonLetters","getButtonLetters","Dialpad","x","topRow","getButton","toString","middleRow","bottomRow","handleClick","sendDTMF","requestOptions","body","contentDisposition","contentType","content","info","open","dialpad","dialpadRow","Hold","hold","checkHoldState","actionButton","holdIcon","stateChanged","userAgent","Mute","onMute","mute","Promise","resolve","reject","pc","enabled","micOffIcon","BlindTransfer","blindTransferCall","destination","refer","transferButtons","blindIcon","AttendedTransfer","attendedTransferSessionPending","attendedTransferSessionReady","attendedTransferCall","attendedTransfersList","attendedTransferLimit","attendedTransferClear","started","connectAttendedTransfer","attendedTransferSession","cancelAttendedTransfer","phoneConfigAttended","disabledButtons","defaultDial","Phone","connectIcon","endCallButton","cancelIcon","attendedIcon","dialpadOpen","transferMenu","ended","transferDialString","attendedTransferStarted","counterStarted","attendedProcess","bind","componentDidUpdate","newProps","handleCounter","bye","bool","durationDisplay","statusLarge","remoteIdentity","normal","user","_displayName","actionsContainer","disabled","endCallIcon","dialpadIcon","transferIcon","transferInput","e","BlindTranfer","autoPlay","ring","Incoming","handleAccept","accept","sessionDescriptionHandlerOptions","handleDecline","incoming","declineIcon","startCallButton","acceptIcon","getSessions","incomingCalls","elements","PhoneSessions","PS","Dialstring","currentDialString","handleDial","attendedTransferActive","checkDialstring","dialstringContainerStrict","dialButtonStrict","callIconLarge","dialstringContainer","dialInput","onKeyPress","preventDefault","dialButton","callIcon","action","newAttendedTransfers","filter","acceptedIncoming","declinedIncoming","declinedSessions","closedIncoming","newSessions","endHold","newHold","reducers","combineReducers","middleware","thunk","persistConfig","storage","whitelist","persistedReducer","persistReducer","defaultStore","createStore","composeWithDevTools","applyMiddleware","persistor","persistStore","ReactSipPhone","height","containerStyle","Provider","store","PersistGate","loading"],"mappings":"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"}